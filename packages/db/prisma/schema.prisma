generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
    id            Int        @id @default(autoincrement())
    username      String     @unique()
    password      String
    firstName     String
    gameAsUser1   Game[]    @relation("user1")
    gameAsUser2   Game[]    @relation("user2")
}

model Game {
    id            Int        @id @default(autoincrement())
    playedAt      DateTime   @default(now())
    user1          User      @relation("user1",fields: [userId1],references: [id])
    user2          User      @relation("user2",fields: [userId2],references: [id])
    userId1        Int
    userId2        Int
    moves         Move[]
}

model Move {
    id           Int         @id @default(autoincrement())
    move         String
    game         Game        @relation(fields: [gameId],references: [id])
    gameId       Int
}